/**
 * HSC Syllabus Data for Bangladesh Students
 * Comprehensive subject and chapter mapping for AI context
 */

const HSC_SYLLABUS = {
  Physics: {
    "1st_Paper": [
      "ভৌতজগত ও পরিমাপ",
      "ভেক্টর",
      "গতিবিদ্যা",
      "নিউটনিয়ান বলবিদ্যা",
      "কাজ, ক্ষমতা, ও শক্তি",
      "মহাকর্ষ ও অভিকর্ষ",
      "পদার্থের গাঠনিক ধর্ম",
      "পর্যায়বৃত্ত গতি",
      "তরঙ্গ",
      "আদর্শ গ্যাস ও গ্যাসের গতিতত্ত্ব"
    ],
    "2nd_Paper": [
      "তাপগতিবিদ্যা",
      "স্থির তড়িৎ",
      "চল তড়িৎ",
      "তড়িৎ প্রবাহের চৌম্বক ক্রিয়া ও চৌম্বকত্ব",
      "তড়িৎচৌম্বকীয় আবেশ",
      "জ্যামিতিক আলোকবিজ্ঞান",
      "ভৌত আলোকবিজ্ঞান",
      "আধুনিক পদার্থ বিজ্ঞান",
      "পরমাণুর মডেল ও নিউক্লিয়ার পদার্থবিজ্ঞান",
      "সেমিকন্ডাক্টর ও ইলেক্ট্রনিক্স",
      "জ্যোতির্বিজ্ঞান"
    ]
  },

  "Higher Math": {
    "1st_Paper": [
      "ম্যাট্রিক্স ও নির্ণায়ক",
      "ভেক্টর",
      "সরলরেখা",
      "বৃত্ত",
      "বিন্যাস ও সমাবেশ",
      "ত্রিকোণমিতিক অনুপাত",
      "সংযুক্ত ও যৌগিক কোণের ত্রিকোণমিতিক অনুপাত",
      "ফাংশন ও ফাংশনের লেখচিত্র",
      "অন্তরীকরণ",
      "যোগজীকরণ"
    ],
    "2nd_Paper": [
      "বাস্তব সংখ্যা ও অসমতা",
      "যোগাশ্রয়ী প্রোগ্রাম",
      "জটিল সংখ্যা",
      "বহুপদী ও বহুপদী সমীকরণ",
      "দ্বিপদী বিস্তৃতি",
      "কণিক",
      "বিপরীত ত্রিকোণমিতিক ফাংশন ও ত্রিকোণমিতিক সমীকরণ",
      "স্থিতিবিদ্যা",
      "সমতলে বস্তুকণার গতি",
      "বিস্তার পরিমাপ ও সম্ভাবনা"
    ]
  },

  Chemistry: {
    "1st_Paper": [
      "ল্যাবরেটরির নিরাপদ ব্যবহার",
      "গুণগত রসায়ন",
      "মৌলের পর্যায়বৃত্ত ধর্ম ও রাসায়নিক বন্ধন",
      "রাসায়নিক পরিবর্তন",
      "কর্মমুখী রসায়ন"
    ],
    "2nd_Paper": [
      "পরিবেশ রসায়ন",
      "জৈব যৌগ",
      "পরিমাণগত রসায়ন",
      "তড়িৎ রসায়ন",
      "অর্থনৈতিক রসায়ন"
    ]
  },

  ICT: {
    "বিশ্ব ও বাংলাদেশ পরিচিতি": [
      "তথ্য প্রযুক্তির ধারণা",
      "বিশ্বগ্রামের ধারণা",
      "AI, robotics, virtual reality",
      "তথ্য প্রযুক্তির নৈতিকতা ও প্লেজিয়ারিজম",
      "উৎপাদন, কর্মসংস্থান ও যোগাযোগ ক্ষেত্রে তথ্য প্রযুক্তি",
      "অফিস, বাসস্থান ও ব্যবসা বাণিজ্যের ক্ষেত্রে তথ্য প্রযুক্তি",
      "শিক্ষা ও চিকিৎসা ক্ষেত্রে তথ্য ও যোগাযোগ প্রযুক্তি",
      "মহাকাশ অভিযান ও প্রতিরক্ষা",
      "Genetic engineering, nanotechnology",
      "Biometrics and bioinformatics",
      "Cryosurgery"
    ],
    "কমিউনিকেশন সিস্টেমস ও নেটওয়ার্কিং": [
      "নেটওয়ার্কের ধারণা ও গুরুত্ব",
      "নেটওয়ার্কের ধারণা, গুরুত্ব ও টপোলজি",
      "তার বা ক্যাবল মাধ্যম",
      "ওয়ারলেস কমিউনিকেশন ও এর প্রয়োজনীয়তা",
      "ডেটা ট্রান্সমিশন ও কমিউনিকেশন",
      "ডেটা ট্রান্সমিশন মোড ও মেথড",
      "ব্যান্ডউইথ",
      "বিভিন্ন প্রজন্মের মোবাইল",
      "ক্লাউড কম্পিউটিং"
    ],
    "সংখ্যা পদ্ধতি ও ডিজিটাল ডিভাইস": [
      "সংখ্যা পদ্ধতির ইতিহাস ধারণা ও প্রকারভেদ",
      "সংখ্যা পদ্ধতির আন্তঃসম্পর্ক",
      "বাইনারি যোগ বিয়োগ ও দুই এর পরিপূরক",
      "কোড",
      "বুলিয়ান আলজেবরা, উপপাদ্য ও প্রয়োগ",
      "ডি মরগানের সূত্র ও সরলীকরণ",
      "লজিক গেট",
      "Adder",
      "এনকোডার, ডিকোডার ও রেজিস্টার",
      "ফ্লিপফ্লপ ও কাউন্টার"
    ],
    "ওয়েব ডিজাইন পরিচিতি এবং HTML": [
      "ওয়েবসাইট, ব্রাউজার ও সার্চ ইঞ্জিন",
      "ওয়েবসাইটের প্রকারভেদ, IP Address ও URL",
      "ওয়েবসাইটের কাঠামো ও বিস্তারিত",
      "HTML এবং HTML ব্যবহারের সুবিধা ও অসুবিধা",
      "HTML কোড এবং ট্যাগ"
    ],
    "প্রোগ্রামিং ভাষা": [
      "প্রোগ্রামের ধারণা ও কম্পিউটার মেমোরি",
      "বিভিন্ন স্তরের প্রোগ্রামিং ভাষা",
      "অনুবাদক প্রোগ্রাম ও প্রোগ্রাম ডিবাগিং",
      "প্রোগ্রাম অ্যালগরিদম ও ফ্লো চার্ট",
      "প্রোগ্রামের সংগঠন",
      "'সি' প্রোগ্রামিং ভাষা"
    ],
    "ডেটাবেজ ম্যানেজমেন্ট সিস্টেম": [
      "ডেটাবেজের ধারণা ও ডেটাবেজ ম্যানেজমেন্ট সিস্টেম",
      "ডেটাবেজ, টেবিল তৈরি এবং ফিল্ডের ডেটা টাইপ",
      "ডেটাবেজ সর্টিং, ইনডেক্সিং, মডেল এবং বিভিন্ন প্রকার কী ফিল্ড",
      "ডেটাবেজ রিলেশন এবং এর বিভিন্ন প্রকারভেদ",
      "কুয়েরি, অপারেটর সমূহ এবং SQL কমান্ডসমূহ",
      "ডেটাবেজ সিকিউরিটি"
    ]
  },

  Biology: {
    "বোটানি": [
      "কোষ ও এর গঠন",
      "কোষ বিভাজন",
      "কোষ রসায়ন",
      "অণুজীব",
      "শৈবাল ও ছত্রাক",
      "ব্রায়োফাইটা ও টেরিডোফাইটা",
      "নগ্নবীজী ও আবৃতবীজী উদ্ভিদ",
      "টিসু ও টিসুতন্ত্র",
      "উদ্ভিদ শরীরতত্ত্ব",
      "উদ্ভিদ প্রজনন",
      "জীব প্রযুক্তি",
      "বিস্তার ও সংরক্ষণ, জীবের পরিবেশ"
    ],
    "জুওলোজি": [
      "প্রাণীর ভিন্নতা ও শ্রেণিবিন্যাস",
      "প্রাণীর পরিচিতি",
      "পরিপাক ও শোষণ",
      "রক্ত সঞ্চালন",
      "শ্বাসক্রিয়া ও শ্বসন",
      "বর্জ্য নিষ্কাশন",
      "চলন ও অঙ্গচালনা",
      "সমন্বয় ও নিয়ন্ত্রণ",
      "মানব জীবনের ধারাবাহিকতা",
      "মানবদেহের প্রতিরক্ষা",
      "জিনতত্ত্ব ও বিবর্তন",
      "প্রাণীর আচরণ"
    ]
  },

  English: {
    "1st_Paper": [
      "Part A: Reading (Seen Passages)",
      "Part B: Writing (Summary, Completing Story, Email, Paragraph, Composition)"
    ],
    "2nd_Paper": [
      "Part A: Grammar (Articles, Prepositions, Modifiers, Phrases & Clauses, Conditionals, Connectors, Right Forms of Verbs, Narration, Sentence Correction)",
      "Part B: Composition (CV, Application, Report Writing)"
    ],
    "Admission": [
      "Literature",
      "Grammar",
      "Memorizing",
      "Comprehension",
      "Writing"
    ]
  },

  Bangla: {
    "প্রথম পত্র": [
      "গদ্য",
      "পদ্য",
      "উপন্যাস ও নাটক"
    ],
    "২য় পত্র": [
      "উচ্চারণ",
      "বানান",
      "ব্যাকরণিক শব্দশ্রেণি",
      "শব্দের গঠন",
      "বাক্যতত্ত্ব",
      "অপপ্রয়োগ ও শুদ্ধ প্রয়োগ",
      "পারিভাষিক শব্দ/অনুবাদ",
      "দিনলিপি/প্রতিবেদন",
      "বৈদ্যুতিক চিঠি/আবেদন",
      "সারাংশ/ভাবসম্প্রসারণ",
      "সংলাপ/খুদে গল্প",
      "প্রবন্ধ/নিবন্ধ"
    ]
  },

  "Statistics": {
    "১ম পত্র": [
      "পরিসংখ্যান, চলক ও বিভিন্ন প্রতীকের ধারণা",
      "তথ্য সংগ্রহ",
      "কেন্দ্রীয় প্রবণতার পরিমাপ",
      "বিস্তার পরিমাপ",
      "পরিঘাত",
      "বঙ্কিমতা ও সূঁচালতা",
      "সংশ্লেষ ও নির্ভরণ",
      "কালীন সারি",
      "বাংলাদেশের প্রকাশিত পরিসংখ্যান"
    ],
    "২য় পত্র": [
      "সম্ভাবনা",
      "দৈব চলক ও সম্ভাবনা বিন্যাস",
      "গাণিতিক প্রত্যাশা",
      "দ্বিপদী বিন্যাস",
      "পৈঁসু বিন্যাস",
      "পরিমিত বিন্যাস",
      "সূচক সংখ্যা",
      "জন পরিসংখ্যান"
    ]
  },

  "IBA": {
    "English_DU": [
      "Grammar Part",
      "Vocabulary Part",
      "Format Based"
    ],
    "English_JU": [
      "Grammar Part",
      "Vocabulary Part"
    ],
    "English_BUP": [
      "Grammar",
      "Vocabulary",
      "Reading Comprehension"
    ],
    "Mathematics_DU": [
      "Set Theory / Venn Diagram",
      "Statistics",
      "Geometry",
      "Algebra",
      "Probability and Possibility",
      "Arithmetic"
    ],
    "Mathematics_JU": [
      "Set Theory / Venn Diagram",
      "Algebra",
      "Geometry",
      "Arithmetic",
      "Data Sufficiency"
    ],
    "Mathematics_BUP": [
      "Arithmetic",
      "Geometry",
      "Algebra"
    ],
    "Analytical_Ability": [
      "Critical Reasoning",
      "Data Sufficiency",
      "Logical Reasoning",
      "IQ",
      "Puzzle Questions"
    ],
    "General_Knowledge": [
      "General Knowledge",
      "Contemporary Issues",
      "Contemporary Business Issues"
    ]
  },

  "General Knowledge": {
    "বাংলাদেশ বিষয়াবলী": [
      "সমাজবিজ্ঞান ও পৌরনীতি",
      "ড. মুহাম্মদ ইউনুস",
      "জুলাই অভ্যুত্থান",
      "পূর্ণরূপ বা Abbreviation",
      "ইতিহাস",
      "ভাষা আন্দোলন থেকে মুক্তিযুদ্ধ",
      "বাংলাদেশের পরিচিতি",
      "শিল্প, সাহিত্য ও সংস্কৃতি",
      "কৃষি, অর্থনীতি ও শিল্প বাণিজ্য",
      "সংবিধান",
      "শিক্ষা, স্বাস্থ্য ও চিকিৎসা",
      "যোগাযোগ ব্যবস্থা",
      "জনসংখ্যা",
      "আইন/নির্বাহী/বিচার/স্থানীয় সরকার",
      "ভূগোল",
      "আবিষ্কার/জনক/সাহিত্যকর্ম/উক্তি/পুরষ্কার",
      "খেলাধুলা"
    ],
    "আন্তর্জাতিক বিষয়াবলি": [
      "বিপ্লব/যুদ্ধ/চুক্তি",
      "সংস্থা ও জাতিসংঘ",
      "পৃথিবী ও মহাবিশ্ব",
      "দূতাবাস/বাসভবন/সচিবালয়/স্থাপনা",
      "নিরাপত্তা ও আন্তঃরাষ্ট্রীয় ক্ষমতা",
      "পরিবেশগত ইস্যু ও জলবায়ু কূটনীতি",
      "আন্তর্জাতিক দিবসসমূহ",
      "গণমাধ্যম/সাহিত্যকর্ম/পত্র-পত্রিকা",
      "পুরষ্কার ও সম্মাননা",
      "খেলাধুলা",
      "বিশ্বের বিখ্যাত ব্যক্তিবর্গ"
    ],
    "কারেন্ট অ্যাফেয়ার্স": [
      "বাংলাদেশ বিষয়ক",
      "আন্তর্জাতিক বিষয়ক"
    ],
    "অন্যান্য": [
      "কম্পিউটার",
      "তথ্য প্রযুক্তি",
      "দৈনন্দিন বিজ্ঞান",
      "GK English version"
    ]
  },

  "Mental Ability": {
    "Topics": [
      "বার/দিন/তারিখ/মাস/বছর",
      "ব্যতিক্রম খুঁজে বের করা",
      "বর্ণকোড/ধারা",
      "সম্পর্ক মিলানো",
      "গাণিতিক সমস্যা",
      "আয়না সমস্যা/প্রতিফলনজনিত সমস্যা",
      "The Real Meaning of a Sentence",
      "Analogy",
      "দিক নির্ণয়",
      "Synonyms, Antonyms & Word Meaning",
      "অন্যান্য"
    ]
  }
};

/**
 * Get HSC context prompt for AI
 * @param {string} subject - Subject name
 * @param {string} topic - Specific topic (optional)
 * @returns {string} Context prompt for AI
 */
function getHSCContext(subject, topic = '') {
  let context = `\n\n[HSC BANGLADESH CONTEXT]: You are helping a Higher Secondary Certificate (HSC) student from Bangladesh. `;
  
  if (HSC_SYLLABUS[subject]) {
    context += `This is about ${subject}. `;
    
    // Add relevant chapters
    const chapters = Object.values(HSC_SYLLABUS[subject]).flat();
    if (chapters.length > 0) {
      context += `The HSC syllabus for ${subject} includes: ${chapters.slice(0, 10).join(', ')}${chapters.length > 10 ? ', and more' : ''}. `;
    }
  }
  
  if (topic) {
    context += `The specific topic is: "${topic}". `;
  }
  
  context += `Please provide explanations, examples, and solutions that align with the Bangladesh HSC curriculum. `;
  context += `Use both Bengali and English terms where appropriate. `;
  context += `Reference HSC exam patterns, board questions, and standard textbook approaches when relevant.`;
  
  return context;
}

/**
 * Get all subjects for dropdown
 * @returns {Array} Array of subject names
 */
function getHSCSubjects() {
  return Object.keys(HSC_SYLLABUS).sort();
}

/**
 * Get chapters for a specific subject
 * @param {string} subject - Subject name
 * @returns {Object} Chapters organized by paper/section
 */
function getHSCChapters(subject) {
  return HSC_SYLLABUS[subject] || {};
}

/**
 * Check if a topic matches HSC syllabus
 * @param {string} text - Text to check
 * @returns {Object|null} Matched subject and topic, or null
 */
function detectHSCTopic(text) {
  const lowerText = text.toLowerCase();
  
  for (const [subject, sections] of Object.entries(HSC_SYLLABUS)) {
    for (const [section, topics] of Object.entries(sections)) {
      for (const topic of topics) {
        if (lowerText.includes(topic.toLowerCase())) {
          return {
            subject,
            section,
            topic
          };
        }
      }
    }
  }
  
  return null;
}

// Export for use in other modules
if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    HSC_SYLLABUS,
    getHSCContext,
    getHSCSubjects,
    getHSCChapters,
    detectHSCTopic
  };
}
